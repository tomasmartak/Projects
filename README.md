# Information

Welcome to my projects! This repository includes some of projects I've been working on in Python (Jupyter), shell scripting (bash), and R (R script/RMarkdown). They cover a variety of topics based on problems and datasets encountered in my lab at Terasom s.r.o., and the solutions I came up with to solve them. All sensitive information has been removed.

# Projects:
## R: MS (2023)
<strong>Rationale:</strong> Our lab generated Mass Spectrometry data to find whether a protein of interest migrated to the nucleus or not. Since we had the data, I also set to find out whether I could identify any interesting protein-protein interactions. The experimental setup was a nuclear immunoprecipitation against a protein of interest, with a treated and untreated sample, and an IgG control. There were however two replicates of Treatment and two of Control, and only one of the IgG control (done on Control sample). The scripts in this file have a number of functions: 
  - a) generate a MS-GFplus alternative analysis to check against the MaxQuant analysis we obtained from the MS service
  - b) view peptide fractions for 1+ proteins of interest across different samples
  - c) construct a pipeline that would take information from MaxQuant's <strong>ProteinGroups.txt</strong> analysis files (protein-level intensities automatically generated using iBAQ), compare them to sum/average/median-calculated protein-level intensities from <strong>evidence.txt</strong> and effectively identify interactions. This was successful. The output is an Excel workbook and a knitted .html document with volcano plots.

## R: ChIP-seq (2023)
<strong>Rationale:</strong> Our lab generated ChIP-seq data to find out whether a protein of interest is a transcription factor (i.e. whether some bits of DNA are enriched in our IPs vs our controls). This folder contains a master .RMD document which references a number of bash/Python scripts also included therein - these are supportive and custom written to get a job done faster. At that time, I didn't have as much skills in R as I have now, and I compensated by looking up how to do stuff quicker in bash/Python. While I would've done it differently today, it did its job, and there isn't really a reason to revisit the scripts.

## Python: spheroidAnalyser (v1: 2022; v2:2024)
<strong>Rationale:</strong> our lab routinely generates spheroids. ImageJ was used to analyse brightfield spheroid images generated by a miscalibrated microscope in which the camera and light are not completely centred, resulting in a light gradient from bottom left (dark) to top right (light). The status quo was doing everything by hand in the ImageJ GUI, which I found inhibitive when analysing ~200 images. 

<strong>SpheroidAnalyser_v2:</strong> An update of SpheroidAnalyser_v1 (or rather a complete rehash). It was built and tested in a *poetry*-generated environment (poetry pyproject.TOML and .lock file included) and captures spheroid areas using only opencv. It does this by querying the image directory using tkinter (via the default file explorer), spidering it, and measuring spheroid sizes in available images. This generates a spheroidAnalyser directory containing a) an image directory with contours traced onto successfully (green) and unsuccessfully identified spheroids and b) a .csv file containing spheroid areas and information. Then, the script gathers all areas into a csv file, creates a table from it, and uses seaborn to plot spheroid sizes (both outputted into a spheroidAnalyser analysis directory in the selected root directory). Basic directory naming conventions are enforced.

<strong>SpheroidAnalyser_v1:</strong> This was the first proper script I ever wrote in Python. It was written using Python's opencv (cv2) and ImageJ (pyimagej; run headless) modules and only outputs individual reports for each image-filled directory used as an inpath. 
  - This opens as a Jupyter Notebook. Currently, this does not fully function as a standalone script yet - there are still some minor issues to iron out.
  - <strong>How it works:</strong> to use the script, manually input the path to a directory containing spheroid images (.jpg format only for now) into cell 2. Run cell 1 only once, the run cell 2 as many times as needed with various paths.

  - I have retained the fragmented bits of script I wrote during troubleshooting the final script in cells 3+. While not memory-efficient at all, they are a nice way of visualising the workflow and any potential problems.
  - I have also added three dummy images to try the script on.

## bash: system stuff (2023)
<strong>Rationale:</strong> for the better part of a year, I used Ubuntu only. I love Linux to bits, but it does involve quite a bit of troubleshooting. Two particular grievances I had were installing fonts (e.g. when doing NGO work in Inkscape;  *font_installer.sh*) and GDrive integration into Nautilus. The second should already work, however it doesn't really fully support read/writing. I therefore opted for *Rclone* and wrote a bash script to automate the difficult things (*mounter.sh*). Thirdly, I also have a misguided attempt at refreshing clamav (*refresh_clamav.sh*). I now know (or rather suspect) that this happens automatically, but whatever. Now I must use Windows and this is pretty much a moot point.    

## bash: ChIP-seq mapper (2022)
<strong>Rationale:</strong> our lab sent off in-lab-prepared ChIP samples off for sequencing. I set out to learn how to ChIP-seq analysis on Linux using command line-based programmes. This is the original ChIP-seq mapper I came up with. The updated version (ChIP-seq 2023) can be found above<strong>How it works:</strong> either run in the command line with sh or create an alias. Either way, create a target directory (let's call this chipseq) containing a single child directory (chipseq/raw). This will contain your .fastq ChIP-seq files (currently the script only works with these). Run the script along with the path to the desired .fastq file. <strong> Make sure that you have an appropriate bowtie2 index and an appropriate blacklist somewhere; check the script and adjust the paths there to suite what you currently have, otherwise it will not work. </strong>  
<strong>Overview:</strong> make directory --> FastQC --> bowtie2 alignment --> format change (samtools) --> sorting (sambamba) --> filtering multimappers and duplicates (sambamba) --> create indices  for further analysis (samtools) --> detract blacklisted chromosome regions (bedtools) --> generate alignment statistics (samtools) --> cleanup files into prepared directories --> generate an overall QC report before peak calling (MultiQC).

<strong>WARNING:</strong> this script presumes you are running it on a PC with 8+ threads, and it is currently set at 7

<strong>MISC:</strong>
  - Major inspiration for this exercise: <a href="https://github.com/hbctraining/Intro-to-ChIPseq/blob/master/schedule/3-day.md"> Harvard's Bioinformatic Core (HBC) training </a>.
  - This script hasn't had batch mode enabled as of now, as the aforementioned mode hasn't been tested yet.
  - This script doesn't include any trimming and other such QOL changes after FastQC analysis of our samples. It would seem that Trimmomatic just keeps adding further layers of obfuscation towards my pitiful attempts at building it. Also, Adobe Ant sucks. I shall add Trimmomatic in as soon as I can actually get it to work.
  - The script only deals with mapping and QC visualisation as of now, unfortunately. I still have a lot to work on in terms of grep, awk, and other such vileness in bash, so I haven't gotten around to automating peak calling (MACS2) and visualisation (R script and R packages) yet. I have however created a rudimentary peak scoring system, although the math behind it oscillates from non-existent to a figment of green tea-fueled imagination.

## R: Mass Spectrometry result visualiser (2022)
<strong>Rationale:</strong> see R: MS (2023). This was a very early version of this pipeline done before I knew what I was doing.
<strong>How it works:</strong> download the anonymised and pre-tweaked Mass Spectrometry <a href="https://github.com/tomasmartak/Projects/tree/main/R/raw"> .csv file </a>. Input the location of this into the R script and run it. Everything important should be commented.

  - Due to the existence of actual Mass Spectrometry result analysis and annotation pipelines, this script is pretty much useless. It was only good (perhaps) as an exercise for the uninitiated who had no idea of such pipelines before.  

## R: NIH Gene Ontology profile web scraper (2022)
<strong>Rationale:</strong> I was tasked to look through NIH GO databases and RNA-seq assays to find human tissue sample results for a specific protein and relate it to cancer recurrence. As this directly relates to our projects, I took the liberty of adding a dummy link to a similar assay using p53 instead.
<strong>How it works:</strong> Currently, this is to be run in an IDE. Links to interesting assay results as well as data separators (e.g. recurrence vs no recurrence) have to be input manually, as well as graph descriptors. This can eventually be solved with computer vision/better scraping, but at that time I had no idea I would ever even drift down that particular rabbit hole. For now, everything is to be done manually, and this remains a simple proof-of-concept that can be massively improved upon.
